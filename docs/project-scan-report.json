{
  "workflow_version": "1.2.0",
  "timestamps": {
    "started": "2025-02-23T16:00:00Z",
    "last_updated": "2025-06-10T12:00:00Z"
  },
  "mode": "full_rescan",
  "scan_level": "exhaustive",
  "project_root": "/Users/edhertzog/Documents/digital-anarchy",
  "project_knowledge": "/Users/edhertzog/Documents/digital-anarchy/docs",
  "scan_history": [
    {
      "mode": "initial_scan",
      "version": "v2.5.5",
      "completed": "2025-02-23T16:36:00Z",
      "summary": "Initial exhaustive scan: 7 generated files, 17 domains, 46 RPCs, 409 files, ~107,500 LOC"
    },
    {
      "mode": "full_rescan",
      "version": "v2.5.8",
      "completed": "2025-06-10T12:00:00Z",
      "summary": "Full re-scan after 72-commit upstream sync (v2.5.5 to v2.5.8): 20 domains, 57 RPCs, 493 files, ~107,000 LOC, 4 build variants, App.ts decomposition, 3 new service domains, command palette, security hardening"
    }
  ],
  "completed_steps": [
    {
      "step": "step_1",
      "status": "completed",
      "timestamp": "2025-06-10T11:00:00Z",
      "summary": "Re-classified: still multi-part monolith with 8 parts. Now 20 service domains (was 17), 4 build variants (was 3)"
    },
    {
      "step": "step_2",
      "status": "completed",
      "timestamp": "2025-06-10T11:05:00Z",
      "summary": "Discovered 44 existing docs including 18 OpenAPI specs (PositiveEventsService new). Trade/Giving specs pending make generate."
    },
    {
      "step": "step_3",
      "status": "completed",
      "timestamp": "2025-06-10T11:10:00Z",
      "summary": "Tech stack: same core (TS/Vite6/Tauri2), 22 runtime deps, new services: trade (WTO), giving (CAF/GHI), positive-events"
    },
    {
      "step": "step_4",
      "status": "completed",
      "timestamp": "2025-06-10T11:15:00Z",
      "summary": "Exhaustive scan: 57 sebuf RPCs, 13 REST endpoints, 62 UI components (26,696 LOC), ~95 services, App.ts decomposed to 499 LOC shell + 8 src/app/ modules (4,995 LOC)"
    },
    {
      "step": "step_5",
      "status": "completed",
      "timestamp": "2025-06-10T11:20:00Z",
      "summary": "Source tree: 493 source files, ~107,000 lines. 326 files added, App.ts refactored."
    },
    {
      "step": "step_6",
      "status": "completed",
      "timestamp": "2025-06-10T11:25:00Z",
      "summary": "Dev guide updated: added happy variant (dev:happy, build:happy), VITE_VARIANT=happy"
    },
    {
      "step": "step_7",
      "status": "completed",
      "timestamp": "2025-06-10T11:30:00Z",
      "summary": "Integration architecture updated: 20 domains, trade/giving/positive-events flows, command palette flow, multi-window desktop, security hardening section"
    },
    {
      "step": "step_8",
      "status": "completed",
      "timestamp": "2025-06-10T11:35:00Z",
      "summary": "Architecture document updated: App.ts decomposition, 20 domain handlers, trade routes, command palette, 62 components"
    },
    {
      "step": "step_9",
      "status": "completed",
      "timestamp": "2025-06-10T11:40:00Z",
      "summary": "All 7 generated docs updated"
    },
    {
      "step": "step_10",
      "status": "completed",
      "timestamp": "2025-06-10T11:45:00Z",
      "summary": "Master index.md updated: v2.5.8, 20 domains, 57 RPCs, 4 variants, 18 OpenAPI specs"
    },
    {
      "step": "step_11",
      "status": "completed",
      "timestamp": "2025-06-10T11:50:00Z",
      "summary": "Validation complete"
    },
    {
      "step": "step_12",
      "status": "completed",
      "timestamp": "2025-06-10T11:55:00Z",
      "summary": "Full re-scan workflow complete"
    }
  ],
  "current_step": "completed",
  "timestamps_completed": "2025-06-10T11:55:00Z",
  "findings": {
    "project_classification": {
      "repository_type": "multi-part-monolith",
      "parts_count": 8,
      "primary_tech": "TypeScript, Vite 6, Tauri 2, Protobuf/sebuf",
      "variants": [
        "full",
        "tech",
        "finance",
        "happy"
      ],
      "service_domains": 20,
      "rpc_count": 57,
      "component_count": 62,
      "source_files": 493,
      "total_loc": 107000
    },
    "changes_since_v255": {
      "upstream_commits": 72,
      "new_files": 326,
      "new_lines": 41155,
      "new_domains": [
        "trade",
        "giving",
        "positive-events"
      ],
      "new_variant": "happy",
      "app_decomposition": "4,629 LOC monolith -> 499 LOC shell + 8 src/app/ modules (4,995 LOC)",
      "new_features": [
        "command palette",
        "trade route visualization",
        "multi-window desktop",
        "circuit breaker persistence",
        "sanitization layer",
        "chokepoint spatial indexing"
      ]
    }
  },
  "project_types": [
    {
      "part_id": "frontend",
      "project_type_id": "web",
      "display_name": "Frontend SPA"
    },
    {
      "part_id": "vercel-api",
      "project_type_id": "backend",
      "display_name": "Vercel Serverless API"
    },
    {
      "part_id": "sebuf-api",
      "project_type_id": "backend",
      "display_name": "Proto-First API (sebuf)"
    },
    {
      "part_id": "desktop",
      "project_type_id": "desktop",
      "display_name": "Desktop App (Tauri)"
    },
    {
      "part_id": "ais-relay",
      "project_type_id": "backend",
      "display_name": "AIS Relay Server"
    },
    {
      "part_id": "convex",
      "project_type_id": "data",
      "display_name": "Convex Backend"
    },
    {
      "part_id": "middleware",
      "project_type_id": "backend",
      "display_name": "Edge Middleware"
    },
    {
      "part_id": "nginx",
      "project_type_id": "infra",
      "display_name": "Nginx Config"
    }
  ],
  "outputs_generated": [
    "project-scan-report.json",
    "index.md",
    "project-overview.md",
    "architecture.md",
    "source-tree-analysis.md",
    "component-inventory.md",
    "api-contracts.md",
    "development-guide.md",
    "integration-architecture.md"
  ],
  "resume_instructions": "Full re-scan complete. All 7 generated docs + index + state file updated for v2.5.8."
}
